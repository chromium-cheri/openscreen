{
  "comments": [
    {
      "key": {
        "uuid": "25d24433_5579f571",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "I filed https://bugs.chromium.org/p/openscreen/issues/detail?id\u003d27 to implement the controller algorithms in this file - you can use TOOD(issue 27) to note the places where additional code needs to be written.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e64f988_08d5d209",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 34,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Sweet, sounds good.",
      "parentUuid": "25d24433_5579f571",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "41240192_87da5d0f",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Nit: Prefer to pass move-only types by value, unless there\u0027s a specific reason to use an rvalue reference.  The compiler should be able to use an rvalue reference when appropriate?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aeaa1dfc_898cceb8",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed. I\u0027ll fix it for the codebase for std::unique_ptr.",
      "parentUuid": "41240192_87da5d0f",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bdfe0c5_cd6bd3c7",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Does each PresentationConnection get its own ProtocolConnection instance (as a view onto the underlying QUIC stream)?  I believe the spec generally allows QUIC streams to be shared among multiple ProtocolConnection.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bb9d6ee_776f9746",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Yeah. I\u0027ll add a TODO.",
      "parentUuid": "8bdfe0c5_cd6bd3c7",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18ad8153_b182d09e",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Here, IMO it\u0027s OK to pass an rvalue reference since we want the caller to move the message.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c02c17e1_442fe57c",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "We may want to return an error code if the caller is violating the contract of the PresentationConnection.  However, this could be expected - see below.\n\nMeta-question: Where is the source of truth about the connection state?\n\nIf there is a state change initiated by the embedder, it has to be the embedder - it will change state before it calls into the library to close the connection.\n\nIf there\u0027s a state change initiated by the OSP library (connection/disconnection/remote close/remote terminate), then it\u0027s the library, which will them notify the embedder.\n\nSo we\u0027ll have to make the APIs aware of the fact that there could be different connection states on the embedder and library sides.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b5ddcd6_48d4b5d4",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 76,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Fair enough. Moving to an error.",
      "parentUuid": "c02c17e1_442fe57c",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cee9b21e_78eb0f59",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Nit: using msgs::PresentationConnectionMessage, ::Message, ::Message::Which, etc. would shorten some lines in this file.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e10bf3aa_345d1cb7",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "I\u0027m interested, but can\u0027t get this working. any using statement I try doesn\u0027t get the right behavior coming out.\n\n../../api/impl/presentation/presentation_connection.cc:154:7: error: no member named \u0027Message\u0027 in the global namespace; did you mean \u0027msgs::PresentationConnectionMessage::Message\u0027?\n\nClosing for now, feel free to repoen.",
      "parentUuid": "cee9b21e_78eb0f59",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82353dfb_2d720b68",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "This should probably be propagated as an error, both through the return value and/or delegate-\u003eOnError().\n\nThe Presentation API spec suggests that failure to send a message should cause the PresentationConnection to be closed - step 5 in:\n\nhttps://w3c.github.io/presentation-api/#sending-a-message-through-presentationconnection\n\nWe should make sure the OSP spec follows suit.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83becb50_9ded04ed",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 90,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed.",
      "parentUuid": "82353dfb_2d720b68",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c83b26e6_73b2d6b9",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "If you have methods with two different implementations selected at runtime, it\u0027s common to factor them out into separate classes (aka Strategy Pattern).\n\nIn this case, controller and receiver-specific methods could go ControllerDelegate and ReceiverDelegate nexted classes that implement a shared delegate base class.\n\nIf it ends up duplicating code, then may not be worth it, but I think you end up with a clearer picture of the role-specific code.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "621c10db_4034fc37",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed. Taking an IOU, this would be a great separate, small, patch.",
      "parentUuid": "c83b26e6_73b2d6b9",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20dc80ba_c02136f2",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 124,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Can we use stream_ here or do we need a new ProtocolConnection to send this message?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64d1c41f_7de41b2b",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 124,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Yeah, we need a new one, since we are tearing down here.",
      "parentUuid": "20dc80ba_c02136f2",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac76a11a_8ca50b34",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Return an error?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "509d3f8c_d0d08a7a",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Yeahr",
      "parentUuid": "ac76a11a_8ca50b34",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a6b5717_bf829453",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Nit: blank line to separate definitions",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b82df7db_caf17b58",
        "filename": "api/impl/presentation/presentation_connection.cc",
        "patchSetId": 2
      },
      "lineNbr": 169,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "6a6b5717_bf829453",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "462968e2_e298b5b3",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "This has landed now, so feel free to update this patch as you see fit, or leave a TODO for another day.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c131e9f1_447007e2",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 82,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Yar",
      "parentUuid": "462968e2_e298b5b3",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ad44f725_ea2c9c35",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "It looks like this is just used to pack the arguments to the ctor, in which case, it would be simpler to just pass the id and url.",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e489ba2a_eaacdb7f",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "It\u0027s passed around some. Cleaned up, should be better now.",
      "parentUuid": "ad44f725_ea2c9c35",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "672fe229_6bfe4e54",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Can you add a comment on who calls these and when?  Are they updating the state of the Connection in response to messages/network events?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37d25457_50ebdcb3",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Done. Yeah, it makes sure the connection is in connected state, as well as notifying the delegate and updating the internal stream.",
      "parentUuid": "672fe229_6bfe4e54",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7d753690_a2b3c4dd",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 168,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "I believe a given Connection should have the same connection ID throughout its lifetime, in which case, the connection id could be part of this struct.\n\nOn the other hand, could these values be members of Connection itself?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85c3ead4_329bd161",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 168,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Yeah, the message_recv_stream_id is basically the connection_id. I don\u0027t think we need to add an ID here at all -- the dchecks just check that the ID is what we expect. Removing.",
      "parentUuid": "7d753690_a2b3c4dd",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac1f0ceb_0a0c0d02",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 181,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Is there a reason the values aren\u0027t just Connection*?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59efda26_86983746",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 181,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed.",
      "parentUuid": "ac1f0ceb_0a0c0d02",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2dd78079_b46b7e4a",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "Nit: private members should end in _",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dea4af7_00e6030b",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed. Fixed.",
      "parentUuid": "2dd78079_b46b7e4a",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce3e786c_11309b5c",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2019-02-04T21:54:28Z",
      "side": 1,
      "message": "DISALLOW_COPY_AND_ASSIGN?",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b288536_065eef0c",
        "filename": "api/public/presentation/presentation_connection.h",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-02-09T03:35:59Z",
      "side": 1,
      "message": "Agreed.",
      "parentUuid": "ce3e786c_11309b5c",
      "revId": "791f7bf09026a0d5b30222e822a90fbf51644270",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}