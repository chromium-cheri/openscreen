{
  "comments": [
    {
      "key": {
        "uuid": "2110434f_1a004943",
        "filename": "platform/api/socket.h",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "cstate or state?\n\nAlso, I\u0027m not a fan of having SetDscp() do anything.  I think the caller should be explicit about what it wants (no default value).",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66987fd8_a036de20",
        "filename": "platform/api/socket.h",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "I can remove the default value. I don\u0027t know how I feel about it either, but I added it here due to a previous discussion thread in this CL",
      "parentUuid": "2110434f_1a004943",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39b7f1d7_1a24957e",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 460,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "ToDscpValue?",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4be03b3c_617a3e31",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 460,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "Good idea. Going with ToPosixDscpValue for clarity",
      "parentUuid": "39b7f1d7_1a24957e",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee48153d_ee2d9b5c",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 463,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "I think we should have a DscpMode::Default that is 0.",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "515409f5_902f8c0e",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 463,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "The reason I went with IPTOS_LOWDELAY for and specifically used kUnspecified for the name is that this is the value when a new socket is created on Posix systems\n\nAccording to http://man7.org/linux/man-pages/man7/ip.7.html \"Linux sends IPTOS_LOWDELAY datagrams first by default\"\n\nWe could add a constructor that sets the DscpMode to whatever we want the default to be, but I wanted to take advantage of whatever internal optimizations a system (posix or otherwise) has in its \"default\" state for any non-media data sent, which is why I went this route",
      "parentUuid": "ee48153d_ee2d9b5c",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae1bbe8a_4d077daa",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 463,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T17:16:17Z",
      "side": 1,
      "message": "The default (and almost all traffic in the wild) is CS0, or 0.  I\u0027m not sure why the man page says that but it sounds out of date.  No one would ever send anything other than 0 by default because it just wouldn\u0027t work (setting DSCP in danger can be worse than not because many routers \"black hole\" or do other crazy stuff).",
      "parentUuid": "515409f5_902f8c0e",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f69050e4_6a926c18",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 465,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "IPTOS_LOWDELAY \u003d 0x10, but usually real-time audio uses IPTOS_DSCP_EF \u003d 0xb8.",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6824f63d_7f6cf50f",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 465,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "Updated. Where are you finding the constants for what we \"usually\" use?",
      "parentUuid": "f69050e4_6a926c18",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b43239a4_56ec5515",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 465,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T17:16:17Z",
      "side": 1,
      "message": "https://tools.ietf.org/html/rfc4594\n\nhttps://cs.chromium.org/chromium/src/net/socket/diff_serv_code_point.h?type\u003dcs\u0026q\u003dDiffServCodePoint\u0026sq\u003dpackage:chromium\u0026g\u003d0\u0026l\u003d15\n\nhttps://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos-18\n\nhttps://cs.corp.google.com/piper///depot/google3/third_party/grte/v4_x86/release/usr/grte/v4/include/netinet/ip.h?type\u003dcs\u0026q\u003dAF41\u0026sq\u003dpackage:%5Epiper$+-file:%5E//depot/google3/experimental+file:%5E//depot/google3/\u0026g\u003d0\u0026l\u003d190",
      "parentUuid": "6824f63d_7f6cf50f",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c889753_b9bd30d2",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 467,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "IPTOS_THROUGHPUT \u003d 0x08, but usually real-time video IPTOS_DSCP_AF41, IPTOS_DSCP_AF42, or IPTOS_DSCP_AF43 (and non-real-time uses IPTOS_DSCP_AF31, IPTOS_DSCP_AF32, or IPTOS_DSCP_AF33) which are 0x68-0x98.\n\nhttps://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos-18\n\n\nOur existing Cast RTP code uses IPTOS_DSCP_AF41 \u003d 0x88",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b97c591_17ac7461",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 467,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "Updated to IPTOS_DSCP_AF41 to align with existing code",
      "parentUuid": "6c889753_b9bd30d2",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e872dbc_70cd31e3",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 469,
      "author": {
        "id": 1125619
      },
      "writtenOn": "2019-05-01T02:48:39Z",
      "side": 1,
      "message": "IPTOS_MINCOST \u003d 0x02, but usually background traffic is IPTOS_DSCP_CS1 \u003d 0x20.\n\nIn fact, this header makes it clear those values have been subsumed and should not be used any more:\n\nhttps://cs.corp.google.com/piper///depot/google3/third_party/grte/v4_x86/release/usr/grte/v4/include/netinet/ip.h?q\u003dIPTOS_LOWDELAY\u0026g\u003d0\u0026l\u003d213",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d033ee98_b39a102e",
        "filename": "platform/posix/socket.cc",
        "patchSetId": 5
      },
      "lineNbr": 469,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-05-01T15:36:15Z",
      "side": 1,
      "message": "Updated to IPTOS_DSCP_CS1\n\nwhere are you getting information on what is usually used?",
      "parentUuid": "0e872dbc_70cd31e3",
      "revId": "ea5cee50f73fb5d64e16338857f0f56c42c030e7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}