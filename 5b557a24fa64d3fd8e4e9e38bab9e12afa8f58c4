{
  "comments": [
    {
      "key": {
        "uuid": "ae4f34f7_5695d859",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-24T21:34:22Z",
      "side": 1,
      "message": "I\u0027d prefer if file name matched the class name, though not a strong preference",
      "range": {
        "startLine": 5,
        "startChar": 8,
        "endLine": 5,
        "endChar": 30
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14f16f6e_ceeac953",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "It has multiple classes in it and public helpers as well. No problem renaming the file, but I think the current name describes the contents quite well.",
      "parentUuid": "ae4f34f7_5695d859",
      "range": {
        "startLine": 5,
        "startChar": 8,
        "endLine": 5,
        "endChar": 30
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2577146f_15a981a1",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-09-24T22:05:00Z",
      "side": 1,
      "message": "+1 for sure, I have a strong preference for file name \u003d class name.",
      "parentUuid": "ae4f34f7_5695d859",
      "range": {
        "startLine": 5,
        "startChar": 8,
        "endLine": 5,
        "endChar": 30
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d7591e8_9f3e3bb7",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1002076
      },
      "writtenOn": "2019-09-24T21:22:31Z",
      "side": 1,
      "message": "naming nit: |tracker| doesn\u0027t feel like it describes the argument accurately. Suggestion: |owned_object_pointer| or just |pointer|?",
      "range": {
        "startLine": 17,
        "startChar": 24,
        "endLine": 17,
        "endChar": 31
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cf5d2cb_9055d9c4",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1002076
      },
      "writtenOn": "2019-09-24T21:22:31Z",
      "side": 1,
      "message": "super nit: void operator()(Type* tracker) const {\n                                          ^^^^^",
      "range": {
        "startLine": 17,
        "startChar": 2,
        "endLine": 17,
        "endChar": 34
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "975a8e5d_f662765a",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3cf5d2cb_9055d9c4",
      "range": {
        "startLine": 17,
        "startChar": 2,
        "endLine": 17,
        "endChar": 34
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f17dfd6f_dbd932de",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6d7591e8_9f3e3bb7",
      "range": {
        "startLine": 17,
        "startChar": 24,
        "endLine": 17,
        "endChar": 31
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91cb196b_df7185b1",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1002076
      },
      "writtenOn": "2019-09-24T21:22:31Z",
      "side": 1,
      "message": "If the TaskRunner is stopped early and destroyed without this task being run, the object will leak.\n\nHOWEVER, don\u0027t fix this. :) I have a CL (almost ready for review), that fixes the task runner shutdown to guarantee all immediately-runnable tasks will run before TaskRunnerImpl::RequestStopSoon() returns: https://chromium-review.googlesource.com/c/openscreen/+/1820181\n\nThough, it might be good to put a code comment here to the effect of, \"WARNING: If this task never runs, the object will leak.\"",
      "range": {
        "startLine": 18,
        "startChar": 4,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3118dd96_a75f186b",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "Yes, I saw your change before I put a PR for this one out :)\nTry-bot caught this exact leak as far as I can tell. I\u0027ll rebase on top of your change and see if the issue is gone.\nAlso, adding a comment in the code as requested.",
      "parentUuid": "91cb196b_df7185b1",
      "range": {
        "startLine": 18,
        "startChar": 4,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed2c9139_18482f4c",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-09-24T22:05:00Z",
      "side": 1,
      "message": "Let\u0027s just wait to resolve this comment until we check in your TaskRunner change? I don\u0027t think a comment is necessary, since once your change is in it should never leak, and if it does we have bigger problems than this.",
      "parentUuid": "91cb196b_df7185b1",
      "range": {
        "startLine": 18,
        "startChar": 4,
        "endLine": 18,
        "endChar": 58
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32c83a22_05942cdb",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-24T21:34:22Z",
      "side": 1,
      "message": "something about this name bothers me and I can\u0027t figure out why\n\nDelayedDeletionUniquePtr seems better to me, but definitely open to other ideas. Maybe something like TaskRunnerOwnedUniquePtr or similar? I\u0027m really not sure\n\nAnyone else have any thoughts?",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 28
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6f9a88f_fd2c901f",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "Default deleter in std is called default_delete, that\u0027s why I called this DelayedDelete.\nI think Delete is more consistent and shorter than Deletion, so I\u0027d be in favor of that.\nRenaming it SerialDeletePtr, and, of course, we can rename it again later.",
      "parentUuid": "32c83a22_05942cdb",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 28
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6774f7dd_5b94cd20",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-09-24T22:05:00Z",
      "side": 1,
      "message": "These seems super verbose. We don\u0027t have a lot of potential namespace collisions, why not:\n\nManagedUniquePtr?",
      "parentUuid": "32c83a22_05942cdb",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 28
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33e77c8d_1bef6c04",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-25T16:16:38Z",
      "side": 1,
      "message": "That\u0027s a name I like! +1 for ManagedUniquePtr",
      "parentUuid": "6774f7dd_5b94cd20",
      "range": {
        "startLine": 26,
        "startChar": 6,
        "endLine": 26,
        "endChar": 28
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49d624c3_e2c29be5",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-24T21:34:22Z",
      "side": 1,
      "message": "DCHECK(task_runner)",
      "range": {
        "startLine": 32,
        "startChar": 47,
        "endLine": 32,
        "endChar": 49
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a3a01cf_917c55c5",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "49d624c3_e2c29be5",
      "range": {
        "startLine": 32,
        "startChar": 47,
        "endLine": 32,
        "endChar": 49
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4798b38_bf01fc21",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-24T21:34:22Z",
      "side": 1,
      "message": "MakeDelayedDeletion?",
      "range": {
        "startLine": 36,
        "startChar": 29,
        "endLine": 36,
        "endChar": 55
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e057bf15_63dad638",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "MakeSerialDeletePtr",
      "parentUuid": "a4798b38_bf01fc21",
      "range": {
        "startLine": 36,
        "startChar": 29,
        "endLine": 36,
        "endChar": 55
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9dabd974_83287c6d",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-09-24T22:05:00Z",
      "side": 1,
      "message": "MakeManagedUnique? To follow general patterns foo_ptr -\u003e make_foo, such as std::unique_ptr and std::make_unique.",
      "parentUuid": "a4798b38_bf01fc21",
      "range": {
        "startLine": 36,
        "startChar": 29,
        "endLine": 36,
        "endChar": 55
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "855107f7_13e35c36",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-25T16:16:38Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "9dabd974_83287c6d",
      "range": {
        "startLine": 36,
        "startChar": 29,
        "endLine": 36,
        "endChar": 55
      },
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb84be9d_272b0566",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1330244
      },
      "writtenOn": "2019-09-24T21:34:22Z",
      "side": 1,
      "message": "Seems worth also adding:\n\nDelayedDeleteUniquePtr\u003cType\u003e MakeDelayedDeletion(TaskRunner* tr, std::unique_ptr\u003cType\u003e\u003e ptr);",
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11ac9773_f546f2af",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1336186
      },
      "writtenOn": "2019-09-24T22:03:27Z",
      "side": 1,
      "message": "That would add a lot of complexity, as unique_ptr might have a custom deleter that has to be propagated. In addition to that, anything that has to be deleted on task runner to avoid race conditions or use-after-delete, should be put into DelayedDelete from the very beginning. I\u0027ll add this helper if the need arises :)",
      "parentUuid": "eb84be9d_272b0566",
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c2e85b94_872d462c",
        "filename": "util/delayed_delete.h",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1323871
      },
      "writtenOn": "2019-09-24T22:05:00Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "eb84be9d_272b0566",
      "revId": "5b557a24fa64d3fd8e4e9e38bab9e12afa8f58c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}