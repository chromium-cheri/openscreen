{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "eb6c02d4_8b5a75c9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179305
      },
      "writtenOn": "2021-02-01T14:20:35Z",
      "side": 1,
      "message": "I\u0027m not a committer / reviewer for openscreen, reassigning to mfoltz@ instead.",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f18ee29_2f6f3dc9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001982
      },
      "writtenOn": "2021-02-01T18:46:25Z",
      "side": 1,
      "message": "I think btolsch@ is more familiar with the certificate handling code.  In general I don\u0027t think we want timezone dependencies in our certificates?\n",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e786dd2e_cc1a2ac8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2021-02-01T21:17:11Z",
      "side": 1,
      "message": "Can you elaborate on when gmtime is wrong?  The unit test you added passes for me with the code as-is.  Also, for certificate time comparisons we use \"now\" as `std::system_clock::now()` which should use UTC time as well.  Is it possible the system time was set incorrectly on the system where you saw a failure?",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94b8649a_f68cd140",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1172439
      },
      "writtenOn": "2021-02-01T23:27:16Z",
      "side": 1,
      "message": "When I type \u0027timedatect\u0027 in my environment,\nI got the below result\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n                      Local time: 화 2021-02-02 08:23:41 KST\n                  Universal time: 월 2021-02-01 23:23:41 UTC\n                        RTC time: 월 2021-02-01 23:23:41\n                       Time zone: Asia/Seoul (KST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nLocal time is 2/2 and Universal time is 2/1.\nIf I make certificate with ./cast_receiver -g,\nit\u0027s before date has today. (2/2).\nBut call mktim -\u003e gmtime return 2/1 and certificate failed.",
      "parentUuid": "e786dd2e_cc1a2ac8",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f59806e8_00292d12",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2021-02-02T19:56:26Z",
      "side": 1,
      "message": "Thank you for that info.  `cast_receiver -g` also uses `system_clock::now()`, so it sounds like the libc `time()` function returns a different value than `system_clock::now()` on your system.  Is that the case?  If not, I\u0027ll have to think more about how this can happen.",
      "parentUuid": "94b8649a_f68cd140",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8197b613_9a30b1c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1172439
      },
      "writtenOn": "2021-02-03T01:07:09Z",
      "side": 1,
      "message": "OK, your right. It\u0027s not resolved via localtime().\nI checked some state.\nCertification use UTS time.\nIn my research, mktime use local time.\nSo, when I insert below code in AuthenticateChallengeReply(), tmp and now is different.\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nDateTime tmp{};\nDateTimeFromSeconds(DateTimeToSeconds(now).count(), \u0026tmp);\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nI update new patch, but I think it is not graceful solution....",
      "parentUuid": "f59806e8_00292d12",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be0fc3ef_cbbd1166",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1215804
      },
      "writtenOn": "2021-02-03T16:45:02Z",
      "side": 1,
      "message": "Ah, okay, so `mktime` is definitely the issue.  Setting the environment variable (even if we added a restoration step) isn\u0027t great.  I think it\u0027s better to use `timegm()` and `_mkgmtime()` on Windows.",
      "parentUuid": "8197b613_9a30b1c3",
      "revId": "a987ab78ff5a35e7641817744f7a26ce9188c2da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}